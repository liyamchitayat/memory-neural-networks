üî¨ Running improved_sae experiment (seed=42)
   üìö Training base models...
   ‚úÖ Models trained: Donor=0.900, Acceptor=0.929
   üîÑ Fitting transfer system...
   üéØ Setting up transfer for class 8...
   üìä Measuring accuracies...
üìä MEASURING SIMPLE ACCURACIES
========================================
   donor original classes: 90.0% (1440/1600)
   donor class 8: 84.0% (168/200)
   donor class 9: 88.5% (177/200)
   acceptor before original classes: 64.5% (1032/1600)
   acceptor before class 8: 88.5% (177/200)
   acceptor before class 9: 0.0% (0/200)
   acceptor after original classes: 65.4% (1046/1600)
   acceptor after class 8: 90.0% (180/200)
   acceptor after class 9: 0.0% (0/200)

================================================================================
üö® CRITICAL WARNING: POSSIBLE DATA LEAKAGE DETECTED!
================================================================================
‚ùå Acceptor model has 88.5% accuracy on class 8 BEFORE transfer
‚ùå This is above the 30% threshold, suggesting data leakage!

POSSIBLE CAUSES:
  ‚Ä¢ Class 8 samples leaked into acceptor training data
  ‚Ä¢ Mislabeled samples (8s labeled as other digits)
  ‚Ä¢ Data split contamination
  ‚Ä¢ Model architecture allows high confidence guessing

EXPERIMENT VALIDITY: ‚ö†Ô∏è  RESULTS MAY BE INVALID
Action needed: Investigate data splits and training procedure
================================================================================


üìà SIMPLE ACCURACY RESULTS
============================================================

| Model                    | Original Classes | Class 8  | Class 9  |
|--------------------------|------------------|----------|----------|
| Donor                    |          90.0% |   84.0% |   88.5% |
| Acceptor (Before)        |          64.5% |   88.5% |    0.0% |
| Acceptor (After)         |          65.4% |   90.0% |    0.0% |

üìä KEY OBSERVATIONS:
   ‚Ä¢ Donor should be good at 8 and 9: 84.0%, 88.5%
   ‚Ä¢ Acceptor before should be bad at 8 and 9: 88.5%, 0.0%
   ‚Ä¢ Transfer success if acceptor after improves on 8: 88.5% ‚Üí 90.0%
   ‚Ä¢ Transfer specificity if acceptor after stays bad at 9: 0.0%
   ‚Ä¢ Knowledge preservation if original classes stay good: 65.4%
   üìà Results: Class 8: 88.5% ‚Üí 90.0%
{
  "experiment_id": "improved_sae_seed_42",
  "approach": "improved_sae",
  "seed": 42,
  "timestamp": "2025-07-29T10:44:42.099830",
  "model_accuracies": {
    "donor": 0.9,
    "acceptor": 0.92875
  },
  "simple_accuracy_results": {
    "donor_original_accuracy": 0.9,
    "donor_class_8_accuracy": 0.84,
    "donor_class_9_accuracy": 0.885,
    "acceptor_before_original_accuracy": 0.645,
    "acceptor_before_class_8_accuracy": 0.885,
    "acceptor_before_class_9_accuracy": 0.0,
    "acceptor_after_original_accuracy": 0.65375,
    "acceptor_after_class_8_accuracy": 0.9,
    "acceptor_after_class_9_accuracy": 0.0
  },
  "success_criteria": {
    "knowledge_preservation": false,
    "transfer_effectiveness": true,
    "transfer_specificity": true
  },
  "data_leakage_check": {
    "class_8_before_transfer": 0.885,
    "class_9_before_transfer": 0.0,
    "data_leakage_detected": true
  },
  "config": {
    "max_epochs": 5,
    "sae_epochs": 50,
    "batch_size": 32,
    "learning_rate": 0.001,
    "concept_dim": 24,
    "transfer_class": 8
  }
}
