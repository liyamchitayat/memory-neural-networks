🔬 Running FIXED CLEAN improved_sae experiment (seed=123)
   📚 Training models: Source=[2, 3, 4, 5, 6, 7], Target=[0, 1, 2, 3, 4, 5]
   ✅ Models trained: Source=0.925, Target=0.954
   🔄 Setting up transfer system...
   📊 Measuring accuracies...
📊 MEASURING FIXED CLEAN ACCURACIES
========================================
   source original classes: 92.5% (1110/1200)
   source class 6: 92.0% (184/200)
   source class 7: 93.5% (187/200)
   target before original classes: 95.4% (1145/1200)
   target before class 6: 0.0% (0/200)
   target before class 7: 0.0% (0/200)
   target after original classes: 85.8% (1030/1200)
   target after class 6: 79.5% (159/200)
   target after class 7: 0.0% (0/200)

🔍 DATA LEAKAGE VALIDATION
------------------------------
✅ Transfer class 6: 0.0% ≤ 30%
✅ Specificity class 7: 0.0% ≤ 30%

✅ ALL VALIDATION PASSED - Experiment setup is clean!

📈 FIXED CLEAN ACCURACY RESULTS
================================================================================

| Model                    | Original Classes | Class 6  | Class 7 |
|--------------------------|------------------|----------|----------|
| Source                   |          92.5% |   92.0% |   93.5% |
| Target (Before)          |          95.4% |    0.0% |    0.0% |
| Target (After)           |          85.8% |   79.5% |    0.0% |

📊 KEY OBSERVATIONS:
   • Source trained on {2,3,4,5,6,7} should know class 6 and 7
   • Target trained on {0,1,2,3,4,5} should NOT know class 6 or 7
   • Transfer success: class 6 improves from 0.0% → 79.5%
   • Transfer specificity: class 7 stays low at 0.0%
   • Knowledge preservation: original classes at 85.8%
{
  "experiment_id": "fixed_clean_improved_sae_seed_123",
  "approach": "improved_sae",
  "seed": 123,
  "timestamp": "2025-07-29T13:16:33.627929",
  "experimental_setup": {
    "source_classes": [
      2,
      3,
      4,
      5,
      6,
      7
    ],
    "target_classes": [
      0,
      1,
      2,
      3,
      4,
      5
    ],
    "transfer_class": 6,
    "specificity_class": 7
  },
  "model_accuracies": {
    "source": 0.925,
    "target": 0.9541666666666667
  },
  "fixed_clean_accuracy_results": {
    "source_original_accuracy": 0.925,
    "source_transfer_class_accuracy": 0.92,
    "source_specificity_class_accuracy": 0.935,
    "target_before_original_accuracy": 0.9541666666666667,
    "target_before_transfer_class_accuracy": 0.0,
    "target_before_specificity_class_accuracy": 0.0,
    "target_after_original_accuracy": 0.8583333333333333,
    "target_after_transfer_class_accuracy": 0.795,
    "target_after_specificity_class_accuracy": 0.0
  },
  "success_criteria": {
    "knowledge_preservation": true,
    "transfer_effectiveness": true,
    "transfer_specificity": true
  },
  "data_leakage_check": {
    "transfer_class_before": 0.0,
    "specificity_class_before": 0.0,
    "data_leakage_detected": false
  }
}
